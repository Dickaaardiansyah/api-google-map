/*! For license information please see dashboard.bundle.js.LICENSE.txt */
(()=>{"use strict";var n={56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},72:n=>{var t=[];function e(n){for(var e=-1,r=0;r<t.length;r++)if(t[r].identifier===n){e=r;break}return e}function r(n,r){for(var a={},i=[],d=0;d<n.length;d++){var c=n[d],s=r.base?c[0]+r.base:c[0],l=a[s]||0,p="".concat(s," ").concat(l);a[s]=l+1;var u=e(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var f=o(m,r);r.byIndex=d,t.splice(d,0,{identifier:p,updater:f,references:1})}i.push(p)}return i}function o(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var d=e(a[i]);t[d].references--}for(var c=r(n,o),s=0;s<a.length;s++){var l=e(a[s]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",r=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),r&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),r&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(r)for(var d=0;d<this.length;d++){var c=this[d][0];null!=c&&(i[c]=!0)}for(var s=0;s<n.length;s++){var l=[].concat(n[s]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},494:(n,t,e)=>{e.d(t,{A:()=>d});var r=e(601),o=e.n(r),a=e(314),i=e.n(a)()(o());i.push([n.id,'/* Dashboard Styles */\n.dashboard {\n    padding: 40px 20px;\n    max-width: 1200px;\n    margin: 0 auto;\n    width: 100%;\n  }\n  \n  .dashboard-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 30px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #e0e0e0;\n  }\n  \n  .welcome-text {\n    font-size: 1.5rem;\n    color: var(--dark);\n  }\n  \n  .welcome-text span {\n    color: var(--primary);\n    font-weight: bold;\n  }\n  \n  .dashboard-content {\n    background-color: white;\n    border-radius: 8px;\n    padding: 25px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  }\n  \n  .dashboard-content h2 {\n    color: var(--dark);\n    margin-bottom: 15px;\n  }\n  \n  .dashboard-content p {\n    margin-bottom: 15px;\n    line-height: 1.5;\n  }\n  \n  .dashboard-stats {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    margin-top: 30px;\n  }\n  \n  .stat-card {\n    flex: 1 1 200px;\n    background-color: var(--gray);\n    padding: 20px;\n    border-radius: 8px;\n    text-align: center;\n    transition: transform var(--transition);\n  }\n  \n  .stat-card:hover {\n    transform: translateY(-5px);\n  }\n  \n  .stat-card h3 {\n    color: var(--dark);\n    margin-bottom: 10px;\n  }\n  \n  .stat-number {\n    font-size: 2rem;\n    font-weight: bold;\n    color: var(--primary);\n  }\n  \n  /* Responsive */\n  @media (max-width: 768px) {\n    .navbar {\n      flex-direction: column;\n      align-items: flex-start;\n      padding: 16px 20px;\n    }\n    \n    .nav-links {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      margin: 10px 0;\n    }\n    \n    .login-btn, .logout-btn {\n      align-self: flex-start;\n      margin-top: 10px;\n    }\n    \n    .hero {\n      flex-direction: column;\n      text-align: center;\n    }\n    \n    .dashboard-header {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 15px;\n    }\n    \n    .dashboard-stats {\n      flex-direction: column;\n    }\n  }\n  \n  /* Tambahkan di akhir style.css kamu */\n  .stories-container {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 1rem;\n    margin-top: 1rem;\n  }\n  \n  .story-card {\n    border: 1px solid #ccc;\n    padding: 1rem;\n    border-radius: 12px;\n    max-width: 250px;\n    background: #fff;\n    box-shadow: 0 0 8px rgba(0,0,0,0.1);\n    flex: 1 1 250px;\n  }\n  \n  .story-image {\n    width: 100%;\n    height: 150px;\n    object-fit: cover;\n    border-radius: 8px;\n  }\n  \n  .story-info h3 {\n    margin: 0.5rem 0 0.25rem;\n  }\n  \n  /* Tambahan untuk form upload story */\n  .story-form {\n    margin-top: 2rem;\n    padding: 1rem;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    background-color: #f9f9f9;\n  }\n  \n  .story-form label {\n    display: block;\n    margin-top: 1rem;\n    font-weight: bold;\n  }\n  \n  .story-form textarea,\n  .story-form input[type="file"],\n  .story-form input[type="number"] {\n    width: 100%;\n    padding: 0.5rem;\n    margin-top: 0.25rem;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n  }\n  \n  .story-form button {\n    margin-top: 1rem;\n    padding: 0.5rem 1rem;\n    border: none;\n    background-color: #0066cc;\n    color: white;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  \n  #formMessage {\n    margin-top: 0.5rem;\n    font-size: 0.9rem;\n    color: green;\n  }\n  \n  /* Add these styles to your existing CSS file */\n  \n  /* Map containers */\n  .map-container {\n    width: 100%;\n    height: 300px;\n    margin: 15px 0;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n  }\n  \n  .location-input {\n    margin-bottom: 20px;\n    padding: 15px;\n    background-color: #f9f9f9;\n    border-radius: 5px;\n  }\n  \n  .location-controls {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n  \n  #locationStatus {\n    margin-left: 15px;\n    font-size: 14px;\n    color: #555;\n  }\n  \n  /* Camera preview */\n  .camera-preview {\n    position: relative;\n    margin-top: 10px;\n    width: 100%;\n    max-width: 500px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    overflow: hidden;\n  }\n  \n  .camera-preview video {\n    width: 100%;\n    height: auto;\n    display: block;\n  }\n  \n  .camera-controls {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n  \n  .camera-controls button {\n    padding: 8px 15px;\n    background-color: #4CAF50;\n    color: white;\n    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n  \n  .camera-controls button:hover {\n    background-color: #45a049;\n  }\n  \n  #closeCameraBtn {\n    background-color: #f44336;\n  }\n  \n  #closeCameraBtn:hover {\n    background-color: #d32f2f;\n  }\n  \n  /* Audio recorder */\n  .audio-recorder {\n    margin-top: 10px;\n    padding: 15px;\n    background-color: #f9f9f9;\n    border-radius: 5px;\n  }\n  \n  .audio-controls {\n    display: flex;\n    gap: 10px;\n    margin-bottom: 10px;\n  }\n  \n  .audio-controls button {\n    padding: 8px 15px;\n    background-color: #2196F3;\n    color: white;\n    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n  \n  .audio-controls button:hover {\n    background-color: #0b7dda;\n  }\n  \n  .audio-controls button:disabled {\n    background-color: #cccccc;\n    cursor: not-allowed;\n  }\n  \n  #startRecordingBtn {\n    background-color: #4CAF50;\n  }\n  \n  #startRecordingBtn:hover {\n    background-color: #45a049;\n  }\n  \n  #stopRecordingBtn {\n    background-color: #f44336;\n  }\n  \n  #stopRecordingBtn:hover {\n    background-color: #d32f2f;\n  }\n  \n  /* Media buttons */\n  .media-btn {\n    display: inline-block;\n    margin-left: 10px;\n    padding: 8px 15px;\n    background-color: #2196F3;\n    color: white;\n    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n  \n  .media-btn:hover {\n    background-color: #0b7dda;\n  }\n  \n  .media-input {\n    margin-bottom: 15px;\n  }\n  \n  /* Hide elements */\n  .hidden {\n    display: none;\n  }\n  \n  /* Stories map */\n  .stories-map {\n    margin-top: 30px;\n  }\n  \n  /* Story cards with location info */\n  .location-info {\n    font-size: 12px;\n    color: #666;\n    margin-top: 5px;\n  }\n  \n  /* Responsive adjustments */\n  @media (max-width: 768px) {\n    .map-container {\n      height: 250px;\n    }\n    \n    .location-controls {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n    \n    #locationStatus {\n      margin-left: 0;\n      margin-top: 10px;\n    }\n  }\n  \n  /* General styles */\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n  }\n  \n  body {\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    line-height: 1.6;\n    color: #333;\n    background-color: #f8f9fa;\n  }\n  \n  /* Navbar styling */\n  .navbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: #3498db;\n    color: white;\n    padding: 15px 30px;\n  }\n  \n  .logo {\n    font-size: 24px;\n    font-weight: bold;\n  }\n  \n  .logout-btn {\n    background-color: transparent;\n    border: 2px solid white;\n    color: white;\n    padding: 8px 15px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.3s;\n  }\n  \n  .logout-btn:hover {\n    background-color: white;\n    color: #3498db;\n  }\n  \n  /* Dashboard layout */\n  .dashboard {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 20px;\n  }\n  \n  .dashboard-header {\n    margin-bottom: 30px;\n  }\n  \n  .welcome-text {\n    color: #2c3e50;\n  }\n  \n  .dashboard-content {\n    background-color: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    padding: 25px;\n  }\n  \n  /* Stats cards */\n  .dashboard-stats {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    margin: 25px 0;\n  }\n  \n  .stat-card {\n    flex: 1;\n    min-width: 200px;\n    background-color: #f1f8ff;\n    border-left: 5px solid #3498db;\n    padding: 20px;\n    border-radius: 4px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n  }\n  \n  .stat-number {\n    font-size: 28px;\n    font-weight: bold;\n    color: #3498db;\n  }\n  \n  /* Form styling */\n  .story-form {\n    margin: 30px 0;\n    background-color: #f8f9fa;\n    padding: 20px;\n    border-radius: 8px;\n    border: 1px solid #e9ecef;\n  }\n  \n  .story-form h2 {\n    margin-bottom: 20px;\n    color: #2c3e50;\n  }\n  \n  form {\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  label {\n    font-weight: 600;\n    margin-bottom: 5px;\n    display: block;\n  }\n  \n  textarea, input[type="file"] {\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-family: inherit;\n  }\n  \n  textarea {\n    min-height: 120px;\n    resize: vertical;\n  }\n  \n  button {\n    background-color: #3498db;\n    color: white;\n    border: none;\n    padding: 12px 20px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: 600;\n    transition: background-color 0.3s;\n  }\n  \n  button:hover {\n    background-color: #2980b9;\n  }\n  \n  button:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n  \n  .media-btn {\n    background-color: #2ecc71;\n    margin-top: 10px;\n  }\n  \n  .media-btn:hover {\n    background-color: #27ae60;\n  }\n  \n  /* Media inputs */\n  .media-input, .location-input {\n    margin-top: 15px;\n    border-top: 1px solid #eee;\n    padding-top: 15px;\n  }\n  \n  .hidden {\n    display: none;\n  }\n  \n  /* Camera preview */\n  .camera-preview {\n    margin-top: 15px;\n    position: relative;\n  }\n  \n  .camera-preview video {\n    width: 100%;\n    border-radius: 4px;\n  }\n  \n  .camera-controls {\n    margin-top: 10px;\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n  }\n  \n  /* Audio recorder */\n  .audio-recorder {\n    margin-top: 15px;\n  }\n  \n  .audio-controls {\n    display: flex;\n    gap: 10px;\n  }\n  \n  #audioPlayer {\n    margin-top: 15px;\n  }\n  \n  /* Map styles */\n  .map-container {\n    height: 300px;\n    margin-top: 15px;\n    border-radius: 8px;\n    border: 1px solid #ddd;\n  }\n  \n  #locationStatus {\n    margin: 10px 0;\n    font-style: italic;\n  }\n  \n  /* Form message */\n  #formMessage {\n    margin-top: 15px;\n    padding: 10px;\n    border-radius: 4px;\n  }\n  \n  /* Story list */\n  .story-list {\n    margin-top: 40px;\n  }\n  \n  .story-list h2 {\n    margin-bottom: 20px;\n    color: #2c3e50;\n  }\n  \n  .stories-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 20px;\n  }\n  \n  .story-card {\n    border-radius: 8px;\n    overflow: hidden;\n    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);\n    transition: transform 0.3s, box-shadow 0.3s;\n    background-color: white;\n    cursor: pointer;\n  }\n  \n  .story-card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);\n  }\n  \n  .story-image {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n  }\n  \n  .story-info {\n    padding: 15px;\n  }\n  \n  .story-info h3 {\n    margin-bottom: 10px;\n    color: #2c3e50;\n  }\n  \n  .location-info {\n    color: #7f8c8d;\n    font-size: 0.9em;\n    margin-top: 10px;\n  }\n  \n  .view-detail-btn {\n    background-color: #3498db;\n    color: white;\n    border: none;\n    padding: 8px 15px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.9em;\n    margin-top: 10px;\n    width: 100%;\n  }\n  \n  .view-detail-btn:hover {\n    background-color: #2980b9;\n  }\n  \n  /* Stories map section */\n  .stories-map {\n    margin-top: 40px;\n  }\n  \n  .stories-map h2 {\n    margin-bottom: 20px;\n    color: #2c3e50;\n  }\n  \n  /* Modal Styles */\n  .modal {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.7);\n    z-index: 1000;\n    overflow-y: auto;\n  }\n  \n  .modal-content {\n    background-color: white;\n    margin: 10% auto;\n    padding: 25px;\n    border-radius: 8px;\n    width: 90%;\n    max-width: 700px;\n    position: relative;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n    animation: modalFadeIn 0.3s;\n  }\n  \n  @keyframes modalFadeIn {\n    from { opacity: 0; transform: translateY(-30px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  .close-modal {\n    position: absolute;\n    top: 15px;\n    right: 20px;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n    color: #7f8c8d;\n    transition: color 0.3s;\n  }\n  \n  .close-modal:hover {\n    color: #2c3e50;\n  }\n  \n  .story-detail-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #eee;\n  }\n  \n  .story-detail-header h2 {\n    margin: 0;\n    flex-grow: 1;\n    color: #2c3e50;\n  }\n  \n  .story-detail-image {\n    width: 100%;\n    max-height: 500px;\n    object-fit: contain;\n    margin: 15px 0;\n    border-radius: 8px;\n    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);\n  }\n  \n  .story-detail-info {\n    margin: 25px 0;\n  }\n  \n  .story-detail-info h3 {\n    color: #2c3e50;\n    margin-bottom: 10px;\n    font-size: 1.3em;\n  }\n  \n  .story-detail-description {\n    line-height: 1.7;\n    color: #34495e;\n    font-size: 1.05em;\n  }\n  \n  .story-detail-meta {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    font-size: 0.9em;\n    color: #7f8c8d;\n    margin-top: 25px;\n    padding-top: 15px;\n    border-top: 1px solid #eee;\n  }\n  \n  .story-detail-location {\n    margin-top: 25px;\n    padding-top: 15px;\n    border-top: 1px solid #eee;\n  }\n  \n  .detail-location-map {\n    height: 300px;\n    margin-top: 15px;\n    border-radius: 8px;\n    border: 1px solid #ddd;\n  }\n  \n  /* Responsive Design */\n  @media (max-width: 768px) {\n    .dashboard-stats {\n      flex-direction: column;\n    }\n    \n    .modal-content {\n      width: 95%;\n      margin: 5% auto;\n      padding: 15px;\n    }\n    \n    .story-detail-image {\n      max-height: 300px;\n    }\n    \n    .detail-location-map {\n      height: 200px;\n    }\n  }\n  \n  /* Map popup styles */\n  .leaflet-popup-content button {\n    background-color: #3498db;\n    color: white;\n    border: none;\n    padding: 5px 10px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.8em;\n    margin-top: 5px;\n    width: 100%;\n  }\n  \n  .leaflet-popup-content button:hover {\n    background-color: #2980b9;\n  }\n  ',""]);const d=i},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var t={};n.exports=function(n,e){var r=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}}},t={};function e(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return n[r](a,a.exports,e),a.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0;var r=e(72),o=e.n(r),a=e(825),i=e.n(a),d=e(659),c=e.n(d),s=e(56),l=e.n(s),p=e(540),u=e.n(p),m=e(113),f=e.n(m),g=e(494),h={};function x(n){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},x(n)}function b(){b=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function c(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{c({},"")}catch(n){c=function(n,t,e){return n[t]=e}}function s(t,e,r,o){var a=e&&e.prototype instanceof u?e:u,i=Object.create(a.prototype);return c(i,"_invoke",function(t,e,r){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:n,done:!0}}for(r.method=a,r.arg=i;;){var d=r.delegate;if(d){var c=E(d,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var s=l(t,e,r);if("normal"===s.type){if(o=r.done?4:2,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=4,r.method="throw",r.arg=s.arg)}}}(t,r,new I(o||[])),!0),i}function l(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=s;var p={};function u(){}function m(){}function f(){}var g={};c(g,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(S([])));y&&y!==e&&r.call(y,a)&&(g=y);var v=f.prototype=u.prototype=Object.create(g);function w(n){["next","throw","return"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function k(n,t){function e(o,a,i,d){var c=l(n[o],n,a);if("throw"!==c.type){var s=c.arg,p=s.value;return p&&"object"==x(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(n){e("next",n,i,d)}),(function(n){e("throw",n,i,d)})):t.resolve(p).then((function(n){s.value=n,i(s)}),(function(n){return e("throw",n,i,d)}))}d(c.arg)}var o;c(this,"_invoke",(function(n,r){function a(){return new t((function(t,o){e(n,r,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function E(t,e){var r=e.method,o=t.i[r];if(o===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=l(o,t.i,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,p;var i=a.arg;return i?i.done?(e[t.r]=i.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(n){this.tryEntries.push(n)}function B(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function I(n){this.tryEntries=[[-1]],n.forEach(L,this),this.reset(!0)}function S(t){if(null!=t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}throw new TypeError(x(t)+" is not iterable")}return m.prototype=f,c(v,"constructor",f),c(f,"constructor",m),m.displayName=c(f,d,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,c(n,d,"GeneratorFunction")),n.prototype=Object.create(v),n},t.awrap=function(n){return{__await:n}},w(k.prototype),c(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new k(s(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},w(v),c(v,d,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=S,I.prototype={constructor:I,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(B),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){i.type="throw",i.arg=t,e.next=n}for(var o=e.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],d=this.prev,c=a[1],s=a[2];if(-1===a[0])return r("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=d){if(d<c)return this.method="next",this.arg=n,r(c),!0;if(d<s)return r(s),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===n||"continue"===n)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=n,a.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),p},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),B(e),p}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var o=r.arg;B(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:S(t),r:e,n:r},"next"===this.method&&(this.arg=n),p}},t}function y(n,t,e,r,o,a,i){try{var d=n[a](i),c=d.value}catch(n){return void e(n)}d.done?t(c):Promise.resolve(c).then(r,o)}function v(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(n){y(a,r,o,i,d,"next",n)}function d(n){y(a,r,o,i,d,"throw",n)}i(void 0)}))}}h.styleTagTransform=f(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=u(),o()(g.A,h),g.A&&g.A.locals&&g.A.locals,document.addEventListener("DOMContentLoaded",(function(){var n=localStorage.getItem("token"),t=localStorage.getItem("name");if(n){var e=null,r=null,o=null,a=null,i=null,d=null,c=null;!function(){var n=document.getElementById("username");n&&t&&(n.textContent=t);var a=document.getElementById("logoutBtn");a&&a.addEventListener("click",s);var f,g,h,y,w,k,E,B,I,S,M,T,C,j,A,z,P,D,F,O=document.getElementById("storyForm");O&&O.addEventListener("submit",x),D=document.getElementById("storyDetailModal"),(F=document.getElementById("closeModal"))&&F.addEventListener("click",(function(){D.style.display="none",c&&(c.remove(),c=null)})),window.addEventListener("click",(function(n){n.target===D&&(D.style.display="none",c&&(c.remove(),c=null))})),M=document.getElementById("takePhotoBtn"),T=document.getElementById("cameraPreview"),C=document.getElementById("cameraVideo"),j=document.getElementById("captureBtn"),A=document.getElementById("closeCameraBtn"),z=document.getElementById("captureCanvas"),P=document.getElementById("photo"),M&&M.addEventListener("click",v(b().mark((function n(){var t;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null!==(t=navigator.mediaDevices)&&void 0!==t&&t.getUserMedia){n.next=4;break}return alert("Browser tidak mendukung kamera"),n.abrupt("return");case 4:return n.next=6,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 6:e=n.sent,C.srcObject=e,T.classList.remove("hidden"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),alert("Gagal mengakses kamera: "+n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))),j&&j.addEventListener("click",(function(){var n=z.getContext("2d");z.width=C.videoWidth,z.height=C.videoHeight,n.drawImage(C,0,0),z.toBlob((function(n){var t=new File([n],"photo.jpg",{type:"image/jpeg"}),e=new DataTransfer;e.items.add(t),P.files=e.files,p(),T.classList.add("hidden")}),"image/jpeg")})),A&&A.addEventListener("click",(function(){p(),T.classList.add("hidden")})),w=document.getElementById("recordAudioBtn"),k=document.getElementById("audioRecorder"),E=document.getElementById("startRecordingBtn"),B=document.getElementById("stopRecordingBtn"),I=document.getElementById("audioPlayer"),S=document.getElementById("audioPreview"),w&&w.addEventListener("click",(function(){k.classList.toggle("hidden")})),E&&E.addEventListener("click",v(b().mark((function n(){var t,e,a;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=n.sent,e=new MediaRecorder(t),a=[],e.ondataavailable=function(n){return a.push(n.data)},e.onstop=function(){o=new Blob(a,{type:"audio/wav"}),S.src=URL.createObjectURL(o),I.classList.remove("hidden"),t.getTracks().forEach((function(n){return n.stop()}))},e.start(),r=e,E.disabled=!0,B.disabled=!1,n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),alert("Gagal merekam audio: "+n.t0.message);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})))),B&&B.addEventListener("click",(function(){var n;"inactive"!==(null===(n=r)||void 0===n?void 0:n.state)&&(r.stop(),E.disabled=!1,B.disabled=!0)})),f=document.getElementById("map"),g=document.getElementById("storiesMap"),h=document.getElementById("getCurrentLocationBtn"),y=document.getElementById("locationStatus"),document.getElementById("lat"),document.getElementById("lon"),f&&(d=L.map(f).setView([-6.2,106.8],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(d),d.on("click",(function(n){return u(n.latlng.lat,n.latlng.lng)}))),g&&(i=L.map(g).setView([-6.2,106.8],6),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(i)),h&&h.addEventListener("click",(function(){navigator.geolocation?(y.textContent="Mendeteksi lokasi...",navigator.geolocation.getCurrentPosition((function(n){var t=n.coords,e=t.latitude,r=t.longitude;u(e,r),d.setView([e,r],15),y.textContent="Lokasi ditemukan: ".concat(e,", ").concat(r)}),(function(n){y.textContent="Gagal mendapatkan lokasi: "+n.message}))):y.textContent="Browser tidak mendukung lokasi"})),function(){l.apply(this,arguments)}(),m()}(),window.addEventListener("beforeunload",(function(){p(),r&&"inactive"!==r.state&&r.stop()}))}else window.location.href="index.html";function s(){confirm("Apakah Anda yakin ingin keluar?")&&(localStorage.clear(),window.location.href="index.html")}function l(){return(l=v(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{console.log("Fetching user data...")}catch(n){console.error("Error:",n)}case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){e&&(e.getTracks().forEach((function(n){return n.stop()})),e=null)}function u(n,t){document.getElementById("lat").value=n,document.getElementById("lon").value=t,a?a.setLatLng([n,t]):a=L.marker([n,t]).addTo(d)}function m(){return f.apply(this,arguments)}function f(){return(f=v(b().mark((function t(){var e,r,o,a,d;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.getElementById("storiesContainer"),n&&e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch("https://story-api.dicoding.dev/v1/stories",{headers:{Authorization:"Bearer ".concat(n)}});case 6:return r=t.sent,t.next=9,r.json();case 9:if(o=t.sent,a=o.error,d=o.listStory,!a){t.next=14;break}return t.abrupt("return",e.innerHTML="Gagal memuat story");case 14:e.innerHTML=d.map((function(n){return'\n        <div class="story-card" data-id="'.concat(n.id,'">\n          <img src="').concat(n.photoUrl,'" class="story-image" alt="').concat(n.name,'\'s story" />\n          <div class="story-info">\n            <h3>').concat(n.name,"</h3>\n            <p>").concat(n.description.length>100?n.description.substring(0,100)+"...":n.description,"</p>\n            ").concat(n.lat?'<p class="location-info">📍 Location available</p>':"",'\n            <button class="view-detail-btn" data-id="').concat(n.id,'">View Details</button>\n          </div>\n        </div>\n      ')})).join(""),i&&(i.eachLayer((function(n){n instanceof L.Marker&&i.removeLayer(n)})),d.forEach((function(n){n.lat&&n.lon&&L.marker([n.lat,n.lon]).addTo(i).bindPopup("<strong>".concat(n.name,"</strong><br>").concat(n.description.substring(0,100),'...\n                         <br><button class="map-detail-btn" data-id="').concat(n.id,'">View Details</button>'))})),i.on("popupopen",(function(n){var t=document.querySelector(".map-detail-btn");t&&t.addEventListener("click",(function(){g(this.getAttribute("data-id"))}))}))),e.querySelectorAll(".view-detail-btn").forEach((function(n){n.addEventListener("click",(function(t){t.stopPropagation(),g(n.getAttribute("data-id"))}))})),e.querySelectorAll(".story-card").forEach((function(n){n.addEventListener("click",(function(){g(n.getAttribute("data-id"))}))})),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(3),console.error("Error:",t.t0),e.innerHTML="Gagal memuat story.";case 24:case"end":return t.stop()}}),t,null,[[3,20]])})))).apply(this,arguments)}function g(n){if(n){var t=document.getElementById("storyDetailModal");if(t){t.style.display="block";var e=document.getElementById("storyDetailContent");e&&(e.innerHTML="<p>Loading story details...</p>",function(n){h.apply(this,arguments)}(n))}}}function h(){return(h=v(b().mark((function t(e){var r,o,a,i,d,s,l,p;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.getElementById("storyDetailContent"),n&&e&&r){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch("https://story-api.dicoding.dev/v1/stories/".concat(e),{headers:{Authorization:"Bearer ".concat(n)}});case 6:return o=t.sent,t.next=9,o.json();case 9:if(a=t.sent,i=a.error,d=a.message,s=a.story,!i){t.next=16;break}return r.innerHTML="<p>Error: ".concat(d||"Failed to load story details","</p>"),t.abrupt("return");case 16:l=new Date(s.createdAt),p=l.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),r.innerHTML='\n        <div class="story-detail-header">\n          <h2>'.concat(s.name,"'s Story</h2>\n        </div>\n        \n        <img src=\"").concat(s.photoUrl,'" class="story-detail-image" alt="').concat(s.name,'\'s story" />\n        \n        <div class="story-detail-info">\n          <h3>Description</h3>\n          <p class="story-detail-description">').concat(s.description,'</p>\n        </div>\n        \n        <div class="story-detail-meta">\n          <div>Posted on: ').concat(p,"</div>\n          <div>Story ID: ").concat(s.id,"</div>\n        </div>\n      "),s.lat&&s.lon&&(r.innerHTML+='\n          <div class="story-detail-location">\n            <h3>Location</h3>\n            <p>Latitude: '.concat(s.lat,", Longitude: ").concat(s.lon,'</p>\n            <div id="detailLocationMap" class="detail-location-map"></div>\n          </div>\n        '),setTimeout((function(){document.getElementById("detailLocationMap")&&(c&&c.remove(),c=L.map("detailLocationMap").setView([s.lat,s.lon],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(c),L.marker([s.lat,s.lon]).addTo(c).bindPopup("<strong>".concat(s.name,"</strong><br>Located here")),setTimeout((function(){c.invalidateSize()}),100))}),0)),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),console.error("Error fetching story detail:",t.t0),r.innerHTML="<p>Failed to load story details. Please try again later.</p>";case 26:case"end":return t.stop()}}),t,null,[[3,22]])})))).apply(this,arguments)}function x(n){return y.apply(this,arguments)}function y(){return(y=v(b().mark((function t(e){var r,i,c,s,l,u,f,g,h;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=e.target,i=r.description.value.trim(),c=r.photo.files[0],s=r.lat.value,l=r.lon.value,u=document.getElementById("formMessage"),i&&c){t.next=10;break}return u.textContent="Deskripsi dan foto wajib diisi.",t.abrupt("return");case 10:if(!(c.size>1048576)){t.next=13;break}return u.textContent="Ukuran foto maksimal 1MB.",t.abrupt("return");case 13:return(f=new FormData).append("description",i),f.append("photo",c),s&&l&&(f.append("lat",s),f.append("lon",l)),o&&f.append("audio",o,"audio.wav"),t.prev=18,t.next=21,fetch("https://story-api.dicoding.dev/v1/stories",{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:f});case 21:return g=t.sent,t.next=24,g.json();case 24:(h=t.sent).error?u.textContent=h.message:(u.textContent="Story berhasil ditambahkan!",r.reset(),p(),o=null,a&&d.removeLayer(a),document.getElementById("audioPlayer").classList.add("hidden"),document.getElementById("audioRecorder").classList.add("hidden"),document.getElementById("locationStatus").textContent="",m()),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(18),u.textContent="Gagal mengirim story.";case 31:case"end":return t.stop()}}),t,null,[[18,28]])})))).apply(this,arguments)}}))})();